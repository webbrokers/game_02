<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>War Tanks</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="menu.css">
    <script src="app.js" defer></script>
</head>
<body class="menu-screen">
    <div class="menu-overlay">
        <main class="menu-panel intro-panel" role="main">
            <h1 class="game-title">WAR TANKS II</h1>
            <form class="player-form" action="menu.html" method="get">
                <label class="form-label" for="player-name">Имя игрока</label>
                <input class="retro-input" type="text" id="player-name" name="player" placeholder="Commander" required>
                <button class="retro-button" type="submit">Далее</button>
            </form>
        </main>
    </div>
    <script>
        // Сохранение имени игрока перед переходом в меню
        // Используем capture фазу, чтобы сработать ДО app.js
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('.player-form');
            const nameInput = document.getElementById('player-name');
            const submitBtn = form.querySelector('button[type="submit"]');
            
            // Функция сохранения имени
            const saveName = function() {
                const name = nameInput.value.trim() || 'Commander';
                localStorage.setItem('wt2:player-name', name);
                console.log('Имя игрока сохранено:', name);
            };
            
            // Сохраняем при отправке формы (capture фаза - срабатывает первым)
            form.addEventListener('submit', saveName, true);
            
            // Дополнительно сохраняем при клике на кнопку (для надежности)
            submitBtn.addEventListener('click', saveName, true);
        });
    </script>
</body>
</html>
